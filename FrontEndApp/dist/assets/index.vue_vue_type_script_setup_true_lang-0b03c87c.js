import{E as X,H as T,d as K,K as Y,L as j,k as P,Q as Z,R as ee,b7 as te,S as g,aH as oe,aj as U,t as o,l as C,ak as ae,i as se,m as h,ai as ne,j as le,p as ie,o as k,c as re,b as d,e as B,a as p,w as x,u as a,_ as F,a7 as M,am as ce,C as de,ba as E,an as V,F as ue}from"./index-abec4112.js";import{a as me}from"./Switch-5d1c8ac0.js";const ge=X("text",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
`,[T("strong",`
 font-weight: var(--n-font-weight-strong);
 `),T("italic",{fontStyle:"italic"}),T("underline",{textDecoration:"underline"}),T("code",`
 line-height: 1.4;
 display: inline-block;
 font-family: var(--n-font-famliy-mono);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 box-sizing: border-box;
 padding: .05em .35em 0 .35em;
 border-radius: var(--n-code-border-radius);
 font-size: .9em;
 color: var(--n-code-text-color);
 background-color: var(--n-code-color);
 border: var(--n-code-border);
 `)]),he=Object.assign(Object.assign({},j.props),{code:Boolean,type:{type:String,default:"default"},delete:Boolean,strong:Boolean,italic:Boolean,underline:Boolean,depth:[String,Number],tag:String,as:{type:String,validator:()=>!0,default:void 0}}),De=K({name:"Text",props:he,setup(i){const{mergedClsPrefixRef:f,inlineThemeDisabled:u}=Y(i),c=j("Typography","-text",ge,oe,i,f),m=P(()=>{const{depth:y,type:_}=i,A=_==="default"?y===void 0?"textColor":`textColor${y}Depth`:Z("textColor",_),{common:{fontWeightStrong:b,fontFamilyMono:$,cubicBezierEaseInOut:S},self:{codeTextColor:D,codeBorderRadius:v,codeColor:z,codeBorder:l,[A]:R}}=c.value;return{"--n-bezier":S,"--n-text-color":R,"--n-font-weight-strong":b,"--n-font-famliy-mono":$,"--n-code-border-radius":v,"--n-code-text-color":D,"--n-code-color":z,"--n-code-border":l}}),n=u?ee("text",P(()=>`${i.type[0]}${i.depth||""}`),m,i):void 0;return{mergedClsPrefix:f,compitableTag:te(i,["as","tag"]),cssVars:u?void 0:m,themeClass:n==null?void 0:n.themeClass,onRender:n==null?void 0:n.onRender}},render(){var i,f,u;const{mergedClsPrefix:c}=this;(i=this.onRender)===null||i===void 0||i.call(this);const m=[`${c}-text`,this.themeClass,{[`${c}-text--code`]:this.code,[`${c}-text--delete`]:this.delete,[`${c}-text--strong`]:this.strong,[`${c}-text--italic`]:this.italic,[`${c}-text--underline`]:this.underline}],n=(u=(f=this.$slots).default)===null||u===void 0?void 0:u.call(f);return this.code?g("code",{class:m,style:this.cssVars},this.delete?g("del",null,n):n):this.delete?g("del",{class:m,style:this.cssVars},n):g(this.compitableTag||"span",{class:m,style:this.cssVars},n)}}),fe={class:"container_dashboard"},pe={class:"header_dashboard"},ye={class:"flex gap-2 justify-end items-center my-2 mt-8"},ve={class:"w-full flex flex-col gap-1"},xe={class:"flex gap-4 items-center justify-end"},be={class:"flex gap-2 items-center"},we={class:"hidden md:block"},Ce={class:"flex gap-2 items-center"},ke={class:"hidden md:block"},ze=K({__name:"index",props:{title:{},columns:{},modelStore:{},Add:{},Update:{}},setup(i){const f=U([{title:o("common.actions"),key:"actions",width:100,align:"center",render(e){return g("div",{class:"flex gap-1"},[g(C,{strong:!0,tertiary:!0,size:"small",loading:A.value,style:"border-radius:100%",onClick:async()=>{try{await L(e)}catch(t){console.error(o("common.updateFailed"),t.message)}}},{default:()=>g(m({icon:"fluent:edit-32-regular",color:"blue"}))}),g(C,{strong:!0,tertiary:!0,size:"small",loading:_.value,style:"border-radius:100%",onClick:async()=>{try{I(e)}catch(t){console.error(o("common.deleteFailed"),t.message)}}},{default:()=>g(m({icon:"fluent:delete-32-regular",color:"red"}))})])}}]),u=i,c=U([{type:"selection"},...u.columns,...f]),{iconRender:m}=ae(),{isMobile:n}=se(),y=h([]),_=h(!1),A=h(!1),b=h(!0),$=h(!1),S=h([]),D=ne(),v=le(),z=h(null),l=u.modelStore,R=h(10),s=U({page:1,pageCount:P(()=>Math.ceil(l.countTotalData/R.value)),pageSize:R.value}),H=P(()=>{const e=(s.page-1)*s.pageSize,t=e+s.pageSize;return l.listData.slice(e,t)});async function L(e){l.showModelUpdate=!0,z.value=e}const O=e=>e.id;function I(e){const t=D.warning({title:o("common.deleteConfirmation"),content:o("common.deleteConfirmationMessage"),positiveText:o("common.yes"),negativeText:o("common.no"),onPositiveClick:async()=>{try{t.loading=!0,await l.deleteDataAction(e.id),v.success(o("common.deleteSuccess"));const r=(s.page-1)*s.pageSize,N=r+s.pageSize;l.listData.slice(r,N).length===0&&s.page>1&&(s.page-=1),await w()}catch{t.loading=!1,v.error(o("common.deleteFailed"))}finally{t.loading=!1}}})}function W(e){s.page=e,w()}function Q(e){S.value=e}function q(){const e=D.warning({title:o("common.deleteConfirmation"),content:o("common.deleteConfirmationMessage"),positiveText:o("common.yes"),negativeText:o("common.no"),onPositiveClick:async()=>{try{e.loading=!0;const t=S.value.map(J=>l.deleteDataAction(String(J)));await Promise.all(t),v.success(o("common.deleteSuccess"));const r=(s.page-1)*s.pageSize,N=r+s.pageSize;l.listData.slice(r,N).length===0&&s.page>1&&(s.page-=1),await w()}catch(t){console.error(o("common.deleteFailed"),t.message),v.error(o("common.deleteFailed"))}finally{e.loading=!1}}})}async function w(){try{b.value=!0;const{page:e,pageSize:t}=s;await l.fetchDataAction({limit:t,offset:(e-1)*t})}catch(e){e.value=!0,console.error(o("chat.dataFetchError"),e.message)}finally{b.value=!1}}return ie(async()=>{await w()}),(e,t)=>(k(),re(ue,null,[d("div",fe,[d("div",pe,B(e.title),1),d("div",null,[d("div",ye,[d("div",ve,[d("div",xe,[p(a(C),{onClick:t[0]||(t[0]=r=>a(l).showModelAdd=!0),type:"primary"},{default:x(()=>[d("div",be,[p(a(F),{icon:"mdi:add-bold",class:"text-base"}),d("div",we,B(a(o)("common.add")),1)])]),_:1}),p(a(C),{strong:"",secondary:"",type:"error",disabled:y.value.length===0,onClick:q},{default:x(()=>[d("div",Ce,[p(a(F),{icon:"fluent:delete-32-regular",class:"text-base"}),d("div",ke,B(a(o)("common.delete")),1)])]),_:1},8,["disabled"])]),$.value?(k(),M(a(me),{key:1,status:"warning",title:"Error",description:"Error fetching data."},{footer:x(()=>[p(a(C),{onClick:w},{default:x(()=>[de(B(a(o)("common.tryAgain")),1)]),_:1})]),_:1})):(k(),M(a(ce),{key:0,remote:"","min-height":a(n)?380:540,"max-height":a(n)?400:700,size:(a(n),"small"),"checked-row-keys":y.value,"onUpdate:checkedRowKeys":[t[1]||(t[1]=r=>y.value=r),Q],striped:"",loading:b.value,columns:c,data:H.value,"onUpdate:page":W,pagination:s,"row-key":O,maxWidth:200,"scroll-x":700},null,8,["min-height","max-height","size","checked-row-keys","loading","columns","data","pagination"]))])])])]),p(a(V),{show:a(l).showModelAdd,"onUpdate:show":t[2]||(t[2]=r=>a(l).showModelAdd=r),"mask-closable":!1,"auto-focus":!1,preset:"card",style:{width:"95%","max-width":"800px"}},{default:x(()=>[(k(),M(E(e.Add)))]),_:1},8,["show"]),p(a(V),{show:a(l).showModelUpdate,"onUpdate:show":t[3]||(t[3]=r=>a(l).showModelUpdate=r),"mask-closable":!1,"auto-focus":!1,preset:"card",style:{width:"95%","max-width":"800px"}},{default:x(()=>[(k(),M(E(e.Update),{item:z.value},null,8,["item"]))]),_:1},8,["show"])],64))}});export{De as N,ze as _};
