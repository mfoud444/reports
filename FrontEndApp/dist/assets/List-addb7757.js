import{d as q,S as x,J as he,E as $,K as Fe,L as re,a$ as ot,b0 as rt,ap as it,m as V,aq as st,ar as ut,aQ as L,n as dt,O as mt,k as O,b1 as ct,z as R,a0 as ke,b2 as Se,V as Re,W as Ae,b3 as Pe,aP as pt,aG as G,a_ as ft,b4 as vt,H as Be,b5 as bt,b6 as gt,Q as ht,R as yt,b7 as xt,aR as wt,b8 as It,aA as Dt,i as ye,b9 as xe,aI as we,j as Ke,t,p as Ie,c as oe,b as S,e as j,u as e,a as o,w as v,al as De,o as Q,af as X,A as k,B as z,l as $e,C as Ce,a7 as ze,ab as Ct,aj as ve}from"./index-abec4112.js";import{N as J,_ as Nt}from"./index.vue_vue_type_script_setup_true_lang-0b03c87c.js";import{N as Oe}from"./Grid-4ac813f4.js";import{N as y}from"./FormItemGridItem-bf1bf4be.js";import{N as ae}from"./Switch-5d1c8ac0.js";import{N as Ee}from"./Form-94767fab.js";import{N as Ut}from"./Avatar-0b9bedef.js";import{N as Vt}from"./Badge-263e9028.js";import"./FormItem-8daefc5e.js";const kt=q({name:"Remove",render(){return x("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},x("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}});function St(a){return a==null||typeof a=="string"&&a.trim()===""?null:Number(a)}function Rt(a){return a.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(a)||/^\.\d+$/.test(a))}function be(a){return a==null?!0:!Number.isNaN(a)}function Te(a,b){return a==null?"":b===void 0?String(a):a.toFixed(b)}function ge(a){if(a===null)return null;if(typeof a=="number")return a;{const b=Number(a);return Number.isNaN(b)?null:b}}const At=he([$("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),$("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]),Me=800,_e=100,Pt=Object.assign(Object.assign({},re.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),T=q({name:"InputNumber",props:Pt,setup(a){const{mergedBorderedRef:b,mergedClsPrefixRef:c,mergedRtlRef:p}=Fe(a),h=re("InputNumber","-input-number",At,ot,a,c),{localeRef:u}=rt("InputNumber"),D=it(a),{mergedSizeRef:N,mergedDisabledRef:n,mergedStatusRef:C}=D,r=V(null),M=V(null),F=V(null),A=V(a.defaultValue),E=st(a,"value"),I=ut(E,A),w=V(""),s=l=>{const m=String(l).split(".")[1];return m?m.length:0},i=l=>{const m=[a.min,a.max,a.step,l].map(g=>g===void 0?0:s(g));return Math.max(...m)},d=L(()=>{const{placeholder:l}=a;return l!==void 0?l:u.value.placeholder}),f=L(()=>{const l=ge(a.step);return l!==null?l===0?1:Math.abs(l):1}),Ne=L(()=>{const l=ge(a.min);return l!==null?l:null}),Ue=L(()=>{const l=ge(a.max);return l!==null?l:null}),Y=l=>{const{value:m}=I;if(l===m){H();return}const{"onUpdate:value":g,onUpdateValue:U,onChange:B}=a,{nTriggerFormInput:_,nTriggerFormChange:W}=D;B&&G(B,l),U&&G(U,l),g&&G(g,l),A.value=l,_(),W()},P=({offset:l,doUpdateIfValid:m,fixPrecision:g,isInputing:U})=>{const{value:B}=w;if(U&&Rt(B))return!1;const _=(a.parse||St)(B);if(_===null)return m&&Y(null),null;if(be(_)){const W=s(_),{precision:te}=a;if(te!==void 0&&te<W&&!g)return!1;let K=parseFloat((_+l).toFixed(te??i(_)));if(be(K)){const{value:pe}=Ue,{value:fe}=Ne;if(pe!==null&&K>pe){if(!m||U)return!1;K=pe}if(fe!==null&&K<fe){if(!m||U)return!1;K=fe}return a.validator&&!a.validator(K)?!1:(m&&Y(K),K)}}return!1},H=()=>{const{value:l}=I;if(be(l)){const{format:m,precision:g}=a;m?w.value=m(l):l===null||g===void 0||s(l)>g?w.value=Te(l,void 0):w.value=Te(l,g)}else w.value=String(l)};H();const Le=L(()=>P({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),ie=L(()=>{const{value:l}=I;if(a.validator&&l===null)return!1;const{value:m}=f;return P({offset:-m,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),se=L(()=>{const{value:l}=I;if(a.validator&&l===null)return!1;const{value:m}=f;return P({offset:+m,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function je(l){const{onFocus:m}=a,{nTriggerFormFocus:g}=D;m&&G(m,l),g()}function qe(l){var m,g;if(l.target===((m=r.value)===null||m===void 0?void 0:m.wrapperElRef))return;const U=P({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(U!==!1){const W=(g=r.value)===null||g===void 0?void 0:g.inputElRef;W&&(W.value=String(U||"")),I.value===U&&H()}else H();const{onBlur:B}=a,{nTriggerFormBlur:_}=D;B&&G(B,l),_(),ft(()=>{H()})}function He(l){const{onClear:m}=a;m&&G(m,l)}function ue(){const{value:l}=se;if(!l){ce();return}const{value:m}=I;if(m===null)a.validator||Y(Ve());else{const{value:g}=f;P({offset:g,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function de(){const{value:l}=ie;if(!l){me();return}const{value:m}=I;if(m===null)a.validator||Y(Ve());else{const{value:g}=f;P({offset:-g,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const We=je,Ge=qe;function Ve(){if(a.validator)return null;const{value:l}=Ne,{value:m}=Ue;return l!==null?Math.max(0,l):m!==null?Math.min(0,m):0}function Je(l){He(l),Y(null)}function Qe(l){var m,g,U;!((m=F.value)===null||m===void 0)&&m.$el.contains(l.target)&&l.preventDefault(),!((g=M.value)===null||g===void 0)&&g.$el.contains(l.target)&&l.preventDefault(),(U=r.value)===null||U===void 0||U.activate()}let Z=null,ee=null,le=null;function me(){le&&(window.clearTimeout(le),le=null),Z&&(window.clearInterval(Z),Z=null)}function ce(){ne&&(window.clearTimeout(ne),ne=null),ee&&(window.clearInterval(ee),ee=null)}function Xe(){me(),le=window.setTimeout(()=>{Z=window.setInterval(()=>{de()},_e)},Me),Se("mouseup",document,me,{once:!0})}let ne=null;function Ye(){ce(),ne=window.setTimeout(()=>{ee=window.setInterval(()=>{ue()},_e)},Me),Se("mouseup",document,ce,{once:!0})}const Ze=()=>{ee||ue()},et=()=>{Z||de()};function tt(l){var m,g;if(l.key==="Enter"){if(l.target===((m=r.value)===null||m===void 0?void 0:m.wrapperElRef))return;P({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((g=r.value)===null||g===void 0||g.deactivate())}else if(l.key==="ArrowUp"){if(!se.value||a.keyboard.ArrowUp===!1)return;l.preventDefault(),P({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&ue()}else if(l.key==="ArrowDown"){if(!ie.value||a.keyboard.ArrowDown===!1)return;l.preventDefault(),P({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&de()}}function at(l){w.value=l,a.updateValueOnInput&&!a.format&&!a.parse&&a.precision===void 0&&P({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}dt(I,()=>{H()});const lt={focus:()=>{var l;return(l=r.value)===null||l===void 0?void 0:l.focus()},blur:()=>{var l;return(l=r.value)===null||l===void 0?void 0:l.blur()},select:()=>{var l;return(l=r.value)===null||l===void 0?void 0:l.select()}},nt=mt("InputNumber",p,c);return Object.assign(Object.assign({},lt),{rtlEnabled:nt,inputInstRef:r,minusButtonInstRef:M,addButtonInstRef:F,mergedClsPrefix:c,mergedBordered:b,uncontrolledValue:A,mergedValue:I,mergedPlaceholder:d,displayedValueInvalid:Le,mergedSize:N,mergedDisabled:n,displayedValue:w,addable:se,minusable:ie,mergedStatus:C,handleFocus:We,handleBlur:Ge,handleClear:Je,handleMouseDown:Qe,handleAddClick:Ze,handleMinusClick:et,handleAddMousedown:Ye,handleMinusMousedown:Xe,handleKeyDown:tt,handleUpdateDisplayedValue:at,mergedTheme:h,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:O(()=>{const{self:{iconColorDisabled:l}}=h.value,[m,g,U,B]=ct(l);return{textColorTextDisabled:`rgb(${m}, ${g}, ${U})`,opacityDisabled:`${B}`}})})},render(){const{mergedClsPrefix:a,$slots:b}=this,c=()=>x(Pe,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>Re(b["minus-icon"],()=>[x(Ae,{clsPrefix:a},{default:()=>x(kt,null)})])}),p=()=>x(Pe,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>Re(b["add-icon"],()=>[x(Ae,{clsPrefix:a},{default:()=>x(pt,null)})])});return x("div",{class:[`${a}-input-number`,this.rtlEnabled&&`${a}-input-number--rtl`]},x(R,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,internalLoadingBeforeSuffix:!0},{prefix:()=>{var h;return this.showButton&&this.buttonPlacement==="both"?[c(),ke(b.prefix,u=>u?x("span",{class:`${a}-input-number-prefix`},u):null)]:(h=b.prefix)===null||h===void 0?void 0:h.call(b)},suffix:()=>{var h;return this.showButton?[ke(b.suffix,u=>u?x("span",{class:`${a}-input-number-suffix`},u):null),this.buttonPlacement==="right"?c():null,p()]:(h=b.suffix)===null||h===void 0?void 0:h.call(b)}}))}}),Bt=he([he("@keyframes spin-rotate",`
 from {
 transform: rotate(0);
 }
 to {
 transform: rotate(360deg);
 }
 `),$("spin-container",{position:"relative"},[$("spin-body",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[vt()])]),$("spin-body",`
 display: inline-flex;
 align-items: center;
 justify-content: center;
 flex-direction: column;
 `),$("spin",`
 display: inline-flex;
 height: var(--n-size);
 width: var(--n-size);
 font-size: var(--n-size);
 color: var(--n-color);
 `,[Be("rotate",`
 animation: spin-rotate 2s linear infinite;
 `)]),$("spin-description",`
 display: inline-block;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 margin-top: 8px;
 `),$("spin-content",`
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 pointer-events: all;
 `,[Be("spinning",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: none;
 opacity: var(--n-opacity-spinning);
 `)])]),Tt={small:20,medium:18,large:16},Mt=Object.assign(Object.assign({},re.props),{description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0},delay:Number}),_t=q({name:"Spin",props:Mt,setup(a){const{mergedClsPrefixRef:b,inlineThemeDisabled:c}=Fe(a),p=re("Spin","-spin",Bt,bt,a,b),h=O(()=>{const{size:n}=a,{common:{cubicBezierEaseInOut:C},self:r}=p.value,{opacitySpinning:M,color:F,textColor:A}=r,E=typeof n=="number"?gt(n):r[ht("size",n)];return{"--n-bezier":C,"--n-opacity-spinning":M,"--n-size":E,"--n-color":F,"--n-text-color":A}}),u=c?yt("spin",O(()=>{const{size:n}=a;return typeof n=="number"?String(n):n[0]}),h,a):void 0,D=xt(a,["spinning","show"]),N=V(!1);return wt(n=>{let C;if(D.value){const{delay:r}=a;if(r){C=window.setTimeout(()=>{N.value=!0},r),n(()=>{clearTimeout(C)});return}}N.value=D.value}),{mergedClsPrefix:b,active:N,mergedStrokeWidth:O(()=>{const{strokeWidth:n}=a;if(n!==void 0)return n;const{size:C}=a;return Tt[typeof C=="number"?"medium":C]}),cssVars:c?void 0:h,themeClass:u==null?void 0:u.themeClass,onRender:u==null?void 0:u.onRender}},render(){var a,b;const{$slots:c,mergedClsPrefix:p,description:h}=this,u=c.icon&&this.rotate,D=(h||c.description)&&x("div",{class:`${p}-spin-description`},h||((a=c.description)===null||a===void 0?void 0:a.call(c))),N=c.icon?x("div",{class:[`${p}-spin-body`,this.themeClass]},x("div",{class:[`${p}-spin`,u&&`${p}-spin--rotate`],style:c.default?"":this.cssVars},c.icon()),D):x("div",{class:[`${p}-spin-body`,this.themeClass]},x(It,{clsPrefix:p,style:c.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${p}-spin`}),D);return(b=this.onRender)===null||b===void 0||b.call(this),c.default?x("div",{class:[`${p}-spin-container`,this.themeClass],style:this.cssVars},x("div",{class:[`${p}-spin-content`,this.active&&`${p}-spin-content--spinning`]},c),x(Dt,{name:"fade-in-transition"},{default:()=>this.active?N:null})):N}}),Ft={class:"border-none shadow-none flex flex-col gap-2 p-2 rounded-lg"},Kt={class:"post-heading mb-1"},$t={class:"gtext text-2xl font-bold underlined"},zt={style:{display:"flex","justify-content":"flex-end"}},Ot=q({__name:"Add",setup(a){const{isMobile:b}=ye(),c=O(()=>b?24:12),p=xe(),h=we(),u=Ke(),D=V(null),N=V(!1),n=V(p.initState()),C={name:[{required:!0,message:t("common.nameRequired"),trigger:["input","blur"]}],modelCode:[{required:!0,message:t("common.modelCodeRequired"),trigger:["input","blur"]}],companyId:[{required:!0,message:t("common.companyIdRequired"),trigger:["input","blur"]}]},r=[{label:t("common.text"),value:"Text"},{label:t("common.image"),value:"Image"},{label:t("common.audio"),value:"Audio"},{label:t("common.video"),value:"Video"},{label:t("common.documents"),value:"Documents"}],M=V([]);async function F(){try{await h.fetchDataAction({limit:1e3,offset:0}),h.listData=await Promise.all(h.listData.map(async w=>{if(w.logoUrl)try{w.logoUrl=await De(h.bucket,w.logoUrl)}catch(s){console.error(`Failed to fetch image for company ${w.name}:`,s)}return{...w}})),M.value=h.listData.map(w=>({label:w.name,value:w.id,logoUrl:w.logoUrl}))}catch(w){console.error(t("chat.dataFetchError"),w.message)}}Ie(F);async function A(){try{N.value=!0,await p.insertDataAction(n.value),N.value=!1,p.showModelAdd=!1,u.success(t("common.addSuccess"))}catch(w){N.value=!1,console.error(t("common.addFailed"),w.message),u.error(t("common.addFailed"))}}function E(){return!n.value.name||!n.value.modelCode||!n.value.companyId||N.value}function I(w){var s;w.preventDefault(),(s=D.value)==null||s.validate(i=>{i?u.error(t("auth.fillAllField")):A()})}return(w,s)=>(Q(),oe("div",Ft,[S("div",Kt,[S("div",$t,j(e(t)("common.addNew")),1)]),o(e(Ee),{ref_key:"formRef",ref:D,model:n.value,rules:C,size:"large"},{default:v(()=>[S("div",null,[o(e(Oe),null,{default:v(()=>[o(e(y),{span:c.value,path:"companyId",label:e(t)("common.company")},{default:v(()=>[o(e(X),{value:n.value.companyId,"onUpdate:value":s[0]||(s[0]=i=>n.value.companyId=i),options:M.value,placeholder:e(t)("common.selectCompany"),clearable:""},null,8,["value","options","placeholder"])]),_:1},8,["span","label"]),o(e(y),{span:c.value,path:"name",label:e(t)("common.name")},{default:v(()=>[o(e(R),{value:n.value.name,"onUpdate:value":s[1]||(s[1]=i=>n.value.name=i),onKeyup:k(I,["enter"]),placeholder:e(t)("common.name"),clearable:"",onKeydown:s[2]||(s[2]=k(z(()=>{},["prevent"]),["enter"]))},null,8,["value","onKeyup","placeholder"])]),_:1},8,["span","label"]),o(e(y),{span:c.value,path:"modelCode",label:e(t)("common.modelCode")},{default:v(()=>[o(e(R),{value:n.value.modelCode,"onUpdate:value":s[3]||(s[3]=i=>n.value.modelCode=i),onKeyup:k(I,["enter"]),placeholder:e(t)("common.modelCode"),clearable:"",onKeydown:s[4]||(s[4]=k(z(()=>{},["prevent"]),["enter"]))},null,8,["value","onKeyup","placeholder"])]),_:1},8,["span","label"]),o(e(y),{span:c.value,path:"description",label:e(t)("common.description")},{default:v(()=>[o(e(R),{value:n.value.description,"onUpdate:value":s[5]||(s[5]=i=>n.value.description=i),onKeyup:k(I,["enter"]),placeholder:e(t)("common.description"),clearable:"",onKeydown:s[6]||(s[6]=k(z(()=>{},["prevent"]),["enter"]))},null,8,["value","onKeyup","placeholder"])]),_:1},8,["span","label"]),o(e(y),{span:c.value,path:"version",label:e(t)("common.version")},{default:v(()=>[o(e(R),{value:n.value.version,"onUpdate:value":s[7]||(s[7]=i=>n.value.version=i),onKeyup:k(I,["enter"]),placeholder:e(t)("common.version"),clearable:"",onKeydown:s[8]||(s[8]=k(z(()=>{},["prevent"]),["enter"]))},null,8,["value","onKeyup","placeholder"])]),_:1},8,["span","label"]),o(e(y),{span:c.value,path:"inputData",label:e(t)("common.inputData")},{default:v(()=>[o(e(X),{value:n.value.inputData,"onUpdate:value":s[9]||(s[9]=i=>n.value.inputData=i),options:r,multiple:"",placeholder:e(t)("common.selectInputData"),clearable:""},null,8,["value","placeholder"])]),_:1},8,["span","label"]),o(e(y),{span:c.value,path:"outputData",label:e(t)("common.outputData")},{default:v(()=>[o(e(X),{value:n.value.outputData,"onUpdate:value":s[10]||(s[10]=i=>n.value.outputData=i),options:r,multiple:"",placeholder:e(t)("common.selectOutputData"),clearable:""},null,8,["value","placeholder"])]),_:1},8,["span","label"]),o(e(y),{span:12,path:"maxTokens",label:e(t)("common.maxTokens")},{default:v(()=>[o(e(T),{value:n.value.maxTokens,"onUpdate:value":s[11]||(s[11]=i=>n.value.maxTokens=i),placeholder:e(t)("common.maxTokens"),min:"0"},null,8,["value","placeholder"])]),_:1},8,["label"]),o(e(y),{span:12,path:"temperature",label:e(t)("common.temperature")},{default:v(()=>[o(e(T),{value:n.value.temperature,"onUpdate:value":s[12]||(s[12]=i=>n.value.temperature=i),placeholder:e(t)("common.temperature"),step:"0.01",min:"0"},null,8,["value","placeholder"])]),_:1},8,["label"]),o(e(y),{span:12,path:"topP",label:e(t)("common.topP")},{default:v(()=>[o(e(T),{value:n.value.topP,"onUpdate:value":s[13]||(s[13]=i=>n.value.topP=i),placeholder:e(t)("common.topP"),step:"0.01",min:"0",max:"1"},null,8,["value","placeholder"])]),_:1},8,["label"]),o(e(y),{span:12,path:"topK",label:e(t)("common.topK")},{default:v(()=>[o(e(T),{value:n.value.topK,"onUpdate:value":s[14]||(s[14]=i=>n.value.topK=i),placeholder:e(t)("common.topK"),min:"0"},null,8,["value","placeholder"])]),_:1},8,["label"]),o(e(y),{span:12,path:"repetitionPenalty",label:e(t)("common.repetitionPenalty")},{default:v(()=>[o(e(T),{value:n.value.repetitionPenalty,"onUpdate:value":s[15]||(s[15]=i=>n.value.repetitionPenalty=i),placeholder:e(t)("common.repetitionPenalty"),step:"0.01",min:"0"},null,8,["value","placeholder"])]),_:1},8,["label"]),o(e(y),{span:c.value,path:"stop",label:e(t)("common.stop")},{default:v(()=>[o(e(R),{value:n.value.stop,"onUpdate:value":s[16]||(s[16]=i=>n.value.stop=i),placeholder:e(t)("common.stopPlaceholder"),type:"textarea",autosize:{minRows:2,maxRows:4}},null,8,["value","placeholder"])]),_:1},8,["span","label"]),o(e(y),{span:c.value,path:"stream",label:e(t)("common.stream")},{default:v(()=>[o(e(ae),{value:n.value.stream,"onUpdate:value":s[17]||(s[17]=i=>n.value.stream=i),size:"large"},null,8,["value"])]),_:1},8,["span","label"]),o(e(y),{span:c.value,path:"isActivate",label:e(t)("common.isActivate")},{default:v(()=>[o(e(ae),{value:n.value.isActivate,"onUpdate:value":s[18]||(s[18]=i=>n.value.isActivate=i),size:"large"},null,8,["value"])]),_:1},8,["span","label"])]),_:1})]),S("div",zt,[o(e($e),{type:"primary",style:{width:"100%"},size:"large",loading:N.value,disabled:E(),onClick:I},{default:v(()=>[Ce(j(e(t)("common.addNew")),1)]),_:1},8,["loading","disabled"])])]),_:1},8,["model"])]))}}),Et={class:"border-none shadow-none flex flex-col gap-2 p-2 rounded-lg"},Lt={class:"post-heading mb-1"},jt={class:"gtext text-2xl font-bold underlined"},qt={style:{display:"flex","justify-content":"flex-end"}},Ht=q({__name:"Update",props:{item:{}},setup(a){const b=a,{isMobile:c}=ye(),p=O(()=>c?24:12),h=xe(),u=we(),D=Ke(),N=V(null),n=V(!1),C=V({...b.item}),r=V({...b.item}),M={name:[{required:!0,message:t("common.nameRequired"),trigger:["input","blur"]}],modelCode:[{required:!0,message:t("common.modelCodeRequired"),trigger:["input","blur"]}],companyId:[{required:!0,message:t("common.companyIdRequired"),trigger:["input","blur"]}]};async function F(){try{n.value=!0,await h.updateDataAction(r.value),n.value=!1,h.showModelUpdate=!1,D.success(t("common.updateSuccess"))}catch(i){n.value=!1,console.error(t("common.updateFailed"),i.message),D.error(t("common.updateFailed"),i.message)}}const A=[{label:t("common.text"),value:"Text"},{label:t("common.image"),value:"Image"},{label:t("common.audio"),value:"Audio"},{label:t("common.video"),value:"Video"},{label:t("common.documents"),value:"Documents"}],E=O(()=>n.value||!r.value.name||!r.value.modelCode||!r.value.companyId||JSON.stringify(r.value)===JSON.stringify(C.value));function I(i){var d;i.preventDefault(),(d=N.value)==null||d.validate(f=>{f?D.error(t("auth.fillAllField")):F()})}const w=V([]);async function s(){try{await u.fetchDataAction({limit:1e3,offset:0}),u.listData=await Promise.all(u.listData.map(async i=>{if(i.logoUrl)try{i.logoUrl=await De(u.bucket,i.logoUrl)}catch(d){console.error(`Failed to fetch image for company ${i.name}:`,d)}return{...i}})),w.value=u.listData.map(i=>({label:i.name,value:i.id,logoUrl:i.logoUrl}))}catch(i){console.error(t("chat.dataFetchError"),i.message)}finally{}}return Ie(s),(i,d)=>(Q(),oe("div",Et,[S("div",Lt,[S("div",jt,j(e(t)("common.update")),1)]),o(e(Ee),{ref_key:"formRef",ref:N,model:r.value,rules:M,size:"large"},{default:v(()=>[S("div",null,[o(e(Oe),{span:p.value,"x-gap":24},{default:v(()=>[o(e(y),{span:p.value,path:"companyId",label:e(t)("common.company")},{default:v(()=>[o(e(X),{value:r.value.companyId,"onUpdate:value":d[0]||(d[0]=f=>r.value.companyId=f),options:e(u).listData.map(f=>({label:f.name,value:f.id})),placeholder:e(t)("common.selectCompany"),clearable:""},null,8,["value","options","placeholder"])]),_:1},8,["span","label"]),o(e(y),{span:p.value,path:"name",label:e(t)("common.name")},{default:v(()=>[o(e(R),{value:r.value.name,"onUpdate:value":d[1]||(d[1]=f=>r.value.name=f),placeholder:e(t)("common.name"),clearable:"",onKeydown:d[2]||(d[2]=k(z(()=>{},["prevent"]),["enter"])),onKeyup:k(I,["enter"])},null,8,["value","placeholder","onKeyup"])]),_:1},8,["span","label"]),o(e(y),{span:p.value,path:"modelCode",label:e(t)("common.modelCode")},{default:v(()=>[o(e(R),{value:r.value.modelCode,"onUpdate:value":d[3]||(d[3]=f=>r.value.modelCode=f),placeholder:e(t)("common.modelCode"),clearable:"",onKeydown:d[4]||(d[4]=k(z(()=>{},["prevent"]),["enter"])),onKeyup:k(I,["enter"])},null,8,["value","placeholder","onKeyup"])]),_:1},8,["span","label"]),o(e(y),{span:p.value,path:"description",label:e(t)("common.description")},{default:v(()=>[o(e(R),{value:r.value.description,"onUpdate:value":d[5]||(d[5]=f=>r.value.description=f),placeholder:e(t)("common.description"),clearable:"",onKeydown:d[6]||(d[6]=k(z(()=>{},["prevent"]),["enter"])),onKeyup:k(I,["enter"])},null,8,["value","placeholder","onKeyup"])]),_:1},8,["span","label"]),o(e(y),{span:p.value,path:"version",label:e(t)("common.version")},{default:v(()=>[o(e(R),{value:r.value.version,"onUpdate:value":d[7]||(d[7]=f=>r.value.version=f),placeholder:e(t)("common.version"),clearable:"",onKeydown:d[8]||(d[8]=k(z(()=>{},["prevent"]),["enter"])),onKeyup:k(I,["enter"])},null,8,["value","placeholder","onKeyup"])]),_:1},8,["span","label"]),o(e(y),{span:p.value,path:"inputData",label:e(t)("common.inputData")},{default:v(()=>[o(e(X),{value:r.value.inputData,"onUpdate:value":d[9]||(d[9]=f=>r.value.inputData=f),options:A,multiple:"",placeholder:e(t)("common.selectInputData"),clearable:""},null,8,["value","placeholder"])]),_:1},8,["span","label"]),o(e(y),{span:p.value,path:"outputData",label:e(t)("common.outputData")},{default:v(()=>[o(e(X),{value:r.value.outputData,"onUpdate:value":d[10]||(d[10]=f=>r.value.outputData=f),options:A,multiple:"",placeholder:e(t)("common.selectOutputData"),clearable:""},null,8,["value","placeholder"])]),_:1},8,["span","label"]),o(e(y),{span:12,path:"maxTokens",label:e(t)("common.maxTokens")},{default:v(()=>[o(e(T),{value:r.value.maxTokens,"onUpdate:value":d[11]||(d[11]=f=>r.value.maxTokens=f),placeholder:e(t)("common.maxTokens"),min:"0"},null,8,["value","placeholder"])]),_:1},8,["label"]),o(e(y),{span:12,path:"temperature",label:e(t)("common.temperature")},{default:v(()=>[o(e(T),{value:r.value.temperature,"onUpdate:value":d[12]||(d[12]=f=>r.value.temperature=f),placeholder:e(t)("common.temperature"),step:"0.01",min:"0"},null,8,["value","placeholder"])]),_:1},8,["label"]),o(e(y),{span:12,path:"topP",label:e(t)("common.topP")},{default:v(()=>[o(e(T),{value:r.value.topP,"onUpdate:value":d[13]||(d[13]=f=>r.value.topP=f),placeholder:e(t)("common.topP"),step:"0.01",min:"0",max:"1"},null,8,["value","placeholder"])]),_:1},8,["label"]),o(e(y),{span:12,path:"topK",label:e(t)("common.topK")},{default:v(()=>[o(e(T),{value:r.value.topK,"onUpdate:value":d[14]||(d[14]=f=>r.value.topK=f),placeholder:e(t)("common.topK"),type:"number",min:"0"},null,8,["value","placeholder"])]),_:1},8,["label"]),o(e(y),{span:12,path:"repetitionPenalty",label:e(t)("common.repetitionPenalty")},{default:v(()=>[o(e(T),{value:r.value.repetitionPenalty,"onUpdate:value":d[15]||(d[15]=f=>r.value.repetitionPenalty=f),placeholder:e(t)("common.repetitionPenalty"),type:"number",step:"0.01",min:"0"},null,8,["value","placeholder"])]),_:1},8,["label"]),o(e(y),{span:p.value,path:"stop",label:e(t)("common.stop")},{default:v(()=>[o(e(R),{value:r.value.stop,"onUpdate:value":d[16]||(d[16]=f=>r.value.stop=f),placeholder:e(t)("common.stopPlaceholder"),type:"textarea",autosize:{minRows:2,maxRows:4}},null,8,["value","placeholder"])]),_:1},8,["span","label"]),o(e(y),{span:p.value,path:"stream",label:e(t)("common.stream")},{default:v(()=>[o(e(ae),{value:r.value.stream,"onUpdate:value":d[17]||(d[17]=f=>r.value.stream=f),size:"large"},null,8,["value"])]),_:1},8,["span","label"]),o(e(y),{span:p.value,path:"isActivate",label:e(t)("common.isActivate")},{default:v(()=>[o(e(ae),{value:r.value.isActivate,"onUpdate:value":d[18]||(d[18]=f=>r.value.isActivate=f),size:"large"},null,8,["value"])]),_:1},8,["span","label"])]),_:1},8,["span"])]),S("div",qt,[o(e($e),{type:"primary",style:{width:"100%"},size:"large",loading:n.value,disabled:E.value,onClick:I},{default:v(()=>[Ce(j(e(t)("common.update")),1)]),_:1},8,["loading","disabled"])])]),_:1},8,["model"])]))}}),Wt={key:1,class:"flex gap-4 item-center"},Gt={class:"flex flex-col"},Jt={class:"font-bold text-base"},Qt={class:"w-36"},Xt={key:2},Yt=q({__name:"Card",props:{companyId:{}},setup(a){const b=a,c=we(),p=V(null),h=V(!1);async function u(){h.value=!0;try{await c.fetchDataAction({limit:1e3,offset:0}),c.listData=await Promise.all(c.listData.map(async n=>{if(n.logoUrl)try{n.logoUrl=await De(c.bucket,n.logoUrl)}catch(C){console.error(`Failed to fetch image for company ${n.name}:`,C)}return{...n}}))}catch(n){console.error(t("chat.dataFetchError"),n.message)}finally{h.value=!1}}async function D(){let n=c.listData.find(C=>C.id===b.companyId);n||(await u(),n=c.listData.find(C=>C.id===b.companyId)),n?p.value=n:console.error(`Company with ID ${b.companyId} not found`)}Ie(D);const N=O(()=>{var n;return(n=p.value)!=null&&n.isActivate?"success":"error"});return ye(),(n,C)=>h.value?(Q(),ze(e(_t),{key:0,size:"small"})):p.value?(Q(),oe("div",Wt,[o(e(Vt),{dot:"",processing:!1,type:N.value},{default:v(()=>[o(e(Ut),{round:"",size:"medium",src:p.value.logoUrl},null,8,["src"])]),_:1},8,["type"]),S("div",Gt,[S("div",Jt,[o(e(Ct),{"line-clamp":1},{tooltip:v(()=>[S("div",Qt,j(p.value.name),1)]),default:v(()=>[Ce(j(p.value.name)+" ",1)]),_:1})])])])):(Q(),oe("div",Xt,[S("p",null,j(e(t)("common.companyNotFound")),1)]))}}),sa=q({__name:"List",setup(a){const b=xe(),c=ve({title:t("common.company"),key:"company",render(u){return x(Yt,{companyId:u.companyId})}}),p=ve([{title:t("common.name"),key:"name",align:"center",render(u){return x(J,{strong:!0},{default:()=>u.name})}},{title:t("common.modelCode"),key:"modelCode",align:"center",render(u){return x(J,{type:"info"},{default:()=>u.modelCode})},ellipsis:!0},{title:t("common.description"),key:"description",align:"center",render(u){return x(J,{},{default:()=>u.description||"N/A"})},ellipsis:!0},{title:t("common.version"),key:"version",align:"center",render(u){return x(J,{},{default:()=>u.version||"N/A"})},ellipsis:!0},{title:t("common.isActivate"),key:"isActivate",align:"center",render(u){return x(ae,{value:u.isActivate,disabled:!0})}},{title:t("common.createdAt"),key:"createdAt",align:"center",render(u){return x(J,{},{default:()=>new Date(u.createdAt).toLocaleString()})}},{title:t("common.updatedAt"),key:"updatedAt",align:"center",render(u){return x(J,{},{default:()=>new Date(u.updatedAt).toLocaleString()})}}]),h=ve([c,...p]);return(u,D)=>(Q(),ze(e(Nt),{title:e(t)("common.models"),modelStore:e(b),columns:h,Add:Ot,Update:Ht},null,8,["title","modelStore","columns"]))}});export{sa as default};
