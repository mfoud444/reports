import{d as de,h as b,i as An,u as gn,v as Le,c1 as vt,ah as vn,c as M,a0 as bt,c2 as yt,bd as ke,as as mt,c3 as kt,k as J,l as E,m as F,o as te,aw as pt,ax as xt,c4 as wt,B as _n,z as A,C as On,a as bn,f as pe,b as Nt,at as Rt,bi as Ct,H as St,g as _,c5 as tn,ag as Y,R as Kt,b5 as Dt,M as je,b3 as Fn,aA as Tt,aB as Rn,p as De,aq as Lt,c6 as Et,bp as Cn,Z as Ae,A as Ve,y as _e,c7 as Pt,c8 as ln,W as Sn,U as $t,c9 as Kn,O as He,ca as Dn,Q as ne,bo as Tn,cb as Bt,aF as Te,aO as on,aM as Z,aL as Q,aH as q,aV as me,aQ as rn,aG as an,aS as At,a7 as Ln,aP as En,aI as _t,N as dn,aW as sn,aR as cn,a$ as Ot}from"./index-fd4cae50.js";import{g as Ft}from"./get-slot-1efb97e5.js";import{a as It}from"./Checkbox-382b1358.js";import{N as Pn}from"./Input-29b5986e.js";import{a as zt,N as Ut}from"./Tabs-4c15b18e.js";import"./Add-01adea26.js";function In(e){return typeof e=="string"?`s-${e}`:`n-${e}`}const Mt=de({name:"Switcher",render(){return b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},b("path",{d:"M12 8l10 8l-10 8z"}))}});let un;function jt(){if(!An)return!0;if(un===void 0){const e=document.createElement("div");e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e);const t=e.scrollHeight===1;return document.body.removeChild(e),un=t}return un}const Vt=Object.assign(Object.assign({},Le.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrapItem:{type:Boolean,default:!0},itemClass:String,itemStyle:[String,Object],wrap:{type:Boolean,default:!0},internalUseGap:{type:Boolean,default:void 0}}),fn=de({name:"Space",props:Vt,setup(e){const{mergedClsPrefixRef:t,mergedRtlRef:o}=gn(e),s=Le("Space","-space",void 0,vt,e,t),a=vn("Space",o,t);return{useGap:jt(),rtlEnabled:a,mergedClsPrefix:t,margin:M(()=>{const{size:i}=e;if(Array.isArray(i))return{horizontal:i[0],vertical:i[1]};if(typeof i=="number")return{horizontal:i,vertical:i};const{self:{[bt("gap",i)]:x}}=s.value,{row:c,col:k}=yt(x);return{horizontal:ke(k),vertical:ke(c)}})}},render(){const{vertical:e,reverse:t,align:o,inline:s,justify:a,itemClass:i,itemStyle:x,margin:c,wrap:k,mergedClsPrefix:w,rtlEnabled:p,useGap:L,wrapItem:N,internalUseGap:$}=this,R=mt(Ft(this),!1);if(!R.length)return null;const C=`${c.horizontal}px`,g=`${c.horizontal/2}px`,v=`${c.vertical}px`,S=`${c.vertical/2}px`,K=R.length-1,I=a.startsWith("space-");return b("div",{role:"none",class:[`${w}-space`,p&&`${w}-space--rtl`],style:{display:s?"inline-flex":"flex",flexDirection:(()=>e&&!t?"column":e&&t?"column-reverse":!e&&t?"row-reverse":"row")(),justifyContent:["start","end"].includes(a)?`flex-${a}`:a,flexWrap:!k||e?"nowrap":"wrap",marginTop:L||e?"":`-${S}`,marginBottom:L||e?"":`-${S}`,alignItems:o,gap:L?`${c.vertical}px ${c.horizontal}px`:""}},!N&&(L||$)?R:R.map((W,j)=>W.type===kt?W:b("div",{role:"none",class:i,style:[x,{maxWidth:"100%"},L?"":e?{marginBottom:j!==K?v:""}:p?{marginLeft:I?a==="space-between"&&j===K?"":g:j!==K?C:"",marginRight:I?a==="space-between"&&j===0?"":g:"",paddingTop:S,paddingBottom:S}:{marginRight:I?a==="space-between"&&j===K?"":g:j!==K?C:"",marginLeft:I?a==="space-between"&&j===0?"":g:"",paddingTop:S,paddingBottom:S}]},W)))}}),Ht=J([E("list",`
 --n-merged-border-color: var(--n-border-color);
 --n-merged-color: var(--n-color);
 --n-merged-color-hover: var(--n-color-hover);
 margin: 0;
 font-size: var(--n-font-size);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 padding: 0;
 list-style-type: none;
 color: var(--n-text-color);
 background-color: var(--n-merged-color);
 `,[F("show-divider",[E("list-item",[J("&:not(:last-child)",[te("divider",`
 background-color: var(--n-merged-border-color);
 `)])])]),F("clickable",[E("list-item",`
 cursor: pointer;
 `)]),F("bordered",`
 border: 1px solid var(--n-merged-border-color);
 border-radius: var(--n-border-radius);
 `),F("hoverable",[E("list-item",`
 border-radius: var(--n-border-radius);
 `,[J("&:hover",`
 background-color: var(--n-merged-color-hover);
 `,[te("divider",`
 background-color: transparent;
 `)])])]),F("bordered, hoverable",[E("list-item",`
 padding: 12px 20px;
 `),te("header, footer",`
 padding: 12px 20px;
 `)]),te("header, footer",`
 padding: 12px 0;
 box-sizing: border-box;
 transition: border-color .3s var(--n-bezier);
 `,[J("&:not(:last-child)",`
 border-bottom: 1px solid var(--n-merged-border-color);
 `)]),E("list-item",`
 position: relative;
 padding: 12px 0; 
 box-sizing: border-box;
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[te("prefix",`
 margin-right: 20px;
 flex: 0;
 `),te("suffix",`
 margin-left: 20px;
 flex: 0;
 `),te("main",`
 flex: 1;
 `),te("divider",`
 height: 1px;
 position: absolute;
 bottom: 0;
 left: 0;
 right: 0;
 background-color: transparent;
 transition: background-color .3s var(--n-bezier);
 pointer-events: none;
 `)])]),pt(E("list",`
 --n-merged-color-hover: var(--n-color-hover-modal);
 --n-merged-color: var(--n-color-modal);
 --n-merged-border-color: var(--n-border-color-modal);
 `)),xt(E("list",`
 --n-merged-color-hover: var(--n-color-hover-popover);
 --n-merged-color: var(--n-color-popover);
 --n-merged-border-color: var(--n-border-color-popover);
 `))]),qt=Object.assign(Object.assign({},Le.props),{size:{type:String,default:"medium"},bordered:Boolean,clickable:Boolean,hoverable:Boolean,showDivider:{type:Boolean,default:!0}}),zn=bn("n-list"),Gt=de({name:"List",props:qt,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:o,mergedRtlRef:s}=gn(e),a=vn("List",s,t),i=Le("List","-list",Ht,wt,e,t);_n(zn,{showDividerRef:A(e,"showDivider"),mergedClsPrefixRef:t});const x=M(()=>{const{common:{cubicBezierEaseInOut:k},self:{fontSize:w,textColor:p,color:L,colorModal:N,colorPopover:$,borderColor:R,borderColorModal:C,borderColorPopover:g,borderRadius:v,colorHover:S,colorHoverModal:K,colorHoverPopover:I}}=i.value;return{"--n-font-size":w,"--n-bezier":k,"--n-text-color":p,"--n-color":L,"--n-border-radius":v,"--n-border-color":R,"--n-border-color-modal":C,"--n-border-color-popover":g,"--n-color-modal":N,"--n-color-popover":$,"--n-color-hover":S,"--n-color-hover-modal":K,"--n-color-hover-popover":I}}),c=o?On("list",void 0,x,e):void 0;return{mergedClsPrefix:t,rtlEnabled:a,cssVars:o?void 0:x,themeClass:c==null?void 0:c.themeClass,onRender:c==null?void 0:c.onRender}},render(){var e;const{$slots:t,mergedClsPrefix:o,onRender:s}=this;return s==null||s(),b("ul",{class:[`${o}-list`,this.rtlEnabled&&`${o}-list--rtl`,this.bordered&&`${o}-list--bordered`,this.showDivider&&`${o}-list--show-divider`,this.hoverable&&`${o}-list--hoverable`,this.clickable&&`${o}-list--clickable`,this.themeClass],style:this.cssVars},t.header?b("div",{class:`${o}-list__header`},t.header()):null,(e=t.default)===null||e===void 0?void 0:e.call(t),t.footer?b("div",{class:`${o}-list__footer`},t.footer()):null)}}),Wt=de({name:"ListItem",setup(){const e=pe(zn,null);return e||Nt("list-item","`n-list-item` must be placed in `n-list`."),{showDivider:e.showDividerRef,mergedClsPrefix:e.mergedClsPrefixRef}},render(){const{$slots:e,mergedClsPrefix:t}=this;return b("li",{class:`${t}-list-item`},e.prefix?b("div",{class:`${t}-list-item__prefix`},e.prefix()):null,e.default?b("div",{class:`${t}-list-item__main`},e):null,e.suffix?b("div",{class:`${t}-list-item__suffix`},e.suffix()):null,this.showDivider&&b("div",{class:`${t}-list-item__divider`}))}}),Un=bn("n-tree-select"),Oe=bn("n-tree"),Qt=de({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function,tmNode:{type:Object,required:!0}},setup(e){const{renderSwitcherIconRef:t}=pe(Oe,null);return()=>{const{clsPrefix:o,expanded:s,hide:a,indent:i,onClick:x}=e;return b("span",{"data-switcher":!0,class:[`${o}-tree-node-switcher`,s&&`${o}-tree-node-switcher--expanded`,a&&`${o}-tree-node-switcher--hide`],style:{width:`${i}px`},onClick:x},b("div",{class:`${o}-tree-node-switcher__icon`},b(Rt,null,{default:()=>{if(e.loading)return b(Ct,{clsPrefix:o,key:"loading",radius:85,strokeWidth:20});const{value:c}=t;return c?c({expanded:e.expanded,selected:e.selected,option:e.tmNode.rawNode}):b(St,{clsPrefix:o,key:"switcher"},{default:()=>b(Mt,null)})}})))}}}),Xt=de({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const t=pe(Oe);function o(a){const{onCheck:i}=e;i&&i(a)}function s(a){o(a)}return{handleUpdateValue:s,mergedTheme:t.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:t,checked:o,indeterminate:s,disabled:a,focusable:i,indent:x,handleUpdateValue:c}=this;return b("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],style:{width:`${x}px`},"data-checkbox":!0},b(It,{focusable:i,disabled:a,theme:t.peers.Checkbox,themeOverrides:t.peerOverrides.Checkbox,checked:o,indeterminate:s,onUpdateChecked:c}))}}),Yt=de({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:t,renderPrefixRef:o,renderSuffixRef:s,labelFieldRef:a}=pe(Oe),i=_(null);function x(k){const{onClick:w}=e;w&&w(k)}function c(k){x(k)}return{selfRef:i,renderLabel:t,renderPrefix:o,renderSuffix:s,labelField:a,handleClick:c}},render(){const{clsPrefix:e,labelField:t,nodeProps:o,checked:s=!1,selected:a=!1,renderLabel:i,renderPrefix:x,renderSuffix:c,handleClick:k,onDragstart:w,tmNode:{rawNode:p,rawNode:{prefix:L,suffix:N,[t]:$}}}=this;return b("span",Object.assign({},o,{ref:"selfRef",class:[`${e}-tree-node-content`,o==null?void 0:o.class],onClick:k,draggable:w===void 0?void 0:!0,onDragstart:w}),x||L?b("div",{class:`${e}-tree-node-content__prefix`},x?x({option:p,selected:a,checked:s}):tn(L)):null,b("div",{class:`${e}-tree-node-content__text`},i?i({option:p,selected:a,checked:s}):tn($)),c||N?b("div",{class:`${e}-tree-node-content__suffix`},c?c({option:p,selected:a,checked:s}):tn(N)):null)}});function $n({position:e,offsetLevel:t,indent:o,el:s}){const a={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")a.left=0,a.top=0,a.bottom=0,a.borderRadius="inherit",a.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const i=e==="before"?"top":"bottom";a[i]=0,a.left=`${s.offsetLeft+6-t*o}px`,a.height="2px",a.backgroundColor="var(--n-drop-mark-color)",a.transformOrigin=i,a.borderRadius="1px",a.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return b("div",{style:a})}function Zt({dropPosition:e,node:t}){return t.isLeaf===!1||t.children?!0:e!=="inside"}function Jt(e){return M(()=>e.leafOnly?"child":e.checkStrategy)}function be(e,t){return!!e.rawNode[t]}function Mn(e,t,o,s){e==null||e.forEach(a=>{o(a),Mn(a[t],t,o,s),s(a)})}function el(e,t,o,s,a){const i=new Set,x=new Set,c=[];return Mn(e,s,k=>{if(c.push(k),a(t,k)){x.add(k[o]);for(let w=c.length-2;w>=0;--w)if(!i.has(c[w][o]))i.add(c[w][o]);else return}},()=>{c.pop()}),{expandedKeys:Array.from(i),highlightKeySet:x}}if(An&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function nl(e,t,o,s,a){const i=new Set,x=new Set,c=new Set,k=[],w=[],p=[];function L($){$.forEach(R=>{if(p.push(R),t(o,R)){i.add(R[s]),c.add(R[s]);for(let g=p.length-2;g>=0;--g){const v=p[g][s];if(!x.has(v))x.add(v),i.has(v)&&i.delete(v);else break}}const C=R[a];C&&L(C),p.pop()})}L(e);function N($,R){$.forEach(C=>{const g=C[s],v=i.has(g),S=x.has(g);if(!v&&!S)return;const K=C[a];if(K)if(v)R.push(C);else{k.push(g);const I=Object.assign(Object.assign({},C),{[a]:[]});R.push(I),N(K,I[a])}else R.push(C)})}return N(e,w),{filteredTree:w,highlightKeySet:c,expandedKeys:k}}const tl=de({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const t=pe(Oe),{droppingNodeParentRef:o,droppingMouseNodeRef:s,draggingNodeRef:a,droppingPositionRef:i,droppingOffsetLevelRef:x,nodePropsRef:c,indentRef:k,blockLineRef:w,checkboxPlacementRef:p,checkOnClickRef:L,disabledFieldRef:N,showLineRef:$,renderSwitcherIconRef:R,overrideDefaultNodeClickBehaviorRef:C}=t,g=Y(()=>!!e.tmNode.rawNode.checkboxDisabled),v=Y(()=>be(e.tmNode,N.value)),S=Y(()=>t.disabledRef.value||v.value),K=M(()=>{const{value:u}=c;if(u)return u({option:e.tmNode.rawNode})}),I=_(null),W={value:null};Kt(()=>{W.value=I.value.$el});function j(){const u=()=>{const{tmNode:P}=e;if(!P.isLeaf&&!P.shallowLoaded){if(!t.loadingKeysRef.value.has(P.key))t.loadingKeysRef.value.add(P.key);else return;const{onLoadRef:{value:z}}=t;z&&z(P.rawNode).then(H=>{H!==!1&&t.handleSwitcherClick(P)}).finally(()=>{t.loadingKeysRef.value.delete(P.key)})}else t.handleSwitcherClick(P)};R.value?setTimeout(u,0):u()}const ue=Y(()=>!v.value&&t.selectableRef.value&&(t.internalTreeSelect?t.mergedCheckStrategyRef.value!=="child"||t.multipleRef.value&&t.cascadeRef.value||e.tmNode.isLeaf:!0)),ce=Y(()=>t.checkableRef.value&&(t.cascadeRef.value||t.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),fe=Y(()=>t.displayedCheckedKeysRef.value.includes(e.tmNode.key)),se=Y(()=>{const{value:u}=ce;if(!u)return!1;const{value:P}=L,{tmNode:z}=e;return typeof P=="boolean"?!z.disabled&&P:P(e.tmNode.rawNode)});function he(u){const{value:P}=t.expandOnClickRef,{value:z}=ue,{value:H}=se;if(!z&&!P&&!H||je(u,"checkbox")||je(u,"switcher"))return;const{tmNode:X}=e;z&&t.handleSelect(X),P&&!X.isLeaf&&j(),H&&y(!fe.value)}function ge(u){var P,z;if(!(je(u,"checkbox")||je(u,"switcher"))){if(!S.value){const H=C.value;let X=!1;if(H)switch(H({option:e.tmNode.rawNode})){case"toggleCheck":X=!0,y(!fe.value);break;case"toggleSelect":X=!0,t.handleSelect(e.tmNode);break;case"toggleExpand":X=!0,j(),X=!0;break;case"none":X=!0,X=!0;return}X||he(u)}(z=(P=K.value)===null||P===void 0?void 0:P.onClick)===null||z===void 0||z.call(P,u)}}function Ee(u){w.value||ge(u)}function d(u){w.value&&ge(u)}function y(u){t.handleCheck(e.tmNode,u)}function m(u){t.handleDragStart({event:u,node:e.tmNode})}function D(u){u.currentTarget===u.target&&t.handleDragEnter({event:u,node:e.tmNode})}function T(u){u.preventDefault(),t.handleDragOver({event:u,node:e.tmNode})}function V(u){t.handleDragEnd({event:u,node:e.tmNode})}function Pe(u){u.currentTarget===u.target&&t.handleDragLeave({event:u,node:e.tmNode})}function Ge(u){u.preventDefault(),i.value!==null&&t.handleDrop({event:u,node:e.tmNode,dropPosition:i.value})}const We=M(()=>{const{clsPrefix:u}=e,{value:P}=k;if($.value){const z=[];let H=e.tmNode.parent;for(;H;)H.isLastChild?z.push(b("div",{class:`${u}-tree-node-indent`},b("div",{style:{width:`${P}px`}}))):z.push(b("div",{class:[`${u}-tree-node-indent`,`${u}-tree-node-indent--show-line`]},b("div",{style:{width:`${P}px`}}))),H=H.parent;return z.reverse()}else return Dt(e.tmNode.level,b("div",{class:`${e.clsPrefix}-tree-node-indent`},b("div",{style:{width:`${P}px`}})))});return{showDropMark:Y(()=>{const{value:u}=a;if(!u)return;const{value:P}=i;if(!P)return;const{value:z}=s;if(!z)return;const{tmNode:H}=e;return H.key===z.key}),showDropMarkAsParent:Y(()=>{const{value:u}=o;if(!u)return!1;const{tmNode:P}=e,{value:z}=i;return z==="before"||z==="after"?u.key===P.key:!1}),pending:Y(()=>t.pendingNodeKeyRef.value===e.tmNode.key),loading:Y(()=>t.loadingKeysRef.value.has(e.tmNode.key)),highlight:Y(()=>{var u;return(u=t.highlightKeySetRef.value)===null||u===void 0?void 0:u.has(e.tmNode.key)}),checked:fe,indeterminate:Y(()=>t.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:Y(()=>t.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:Y(()=>t.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:S,checkable:ce,mergedCheckOnClick:se,checkboxDisabled:g,selectable:ue,expandOnClick:t.expandOnClickRef,internalScrollable:t.internalScrollableRef,draggable:t.draggableRef,blockLine:w,nodeProps:K,checkboxFocusable:t.internalCheckboxFocusableRef,droppingPosition:i,droppingOffsetLevel:x,indent:k,checkboxPlacement:p,showLine:$,contentInstRef:I,contentElRef:W,indentNodes:We,handleCheck:y,handleDrop:Ge,handleDragStart:m,handleDragEnter:D,handleDragOver:T,handleDragEnd:V,handleDragLeave:Pe,handleLineClick:d,handleContentClick:Ee,handleSwitcherClick:j}},render(){const{tmNode:e,clsPrefix:t,checkable:o,expandOnClick:s,selectable:a,selected:i,checked:x,highlight:c,draggable:k,blockLine:w,indent:p,indentNodes:L,disabled:N,pending:$,internalScrollable:R,nodeProps:C,checkboxPlacement:g}=this,v=k&&!N?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,S=R?In(e.key):void 0,K=g==="right",I=o?b(Xt,{indent:p,right:K,focusable:this.checkboxFocusable,disabled:N||this.checkboxDisabled,clsPrefix:t,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return b("div",Object.assign({class:`${t}-tree-node-wrapper`},v),b("div",Object.assign({},w?C:void 0,{class:[`${t}-tree-node`,{[`${t}-tree-node--selected`]:i,[`${t}-tree-node--checkable`]:o,[`${t}-tree-node--highlight`]:c,[`${t}-tree-node--pending`]:$,[`${t}-tree-node--disabled`]:N,[`${t}-tree-node--selectable`]:a,[`${t}-tree-node--clickable`]:a||s||this.mergedCheckOnClick},C==null?void 0:C.class],"data-key":S,draggable:k&&w,onClick:this.handleLineClick,onDragstart:k&&w&&!N?this.handleDragStart:void 0}),L,e.isLeaf&&this.showLine?b("div",{class:[`${t}-tree-node-indent`,`${t}-tree-node-indent--show-line`,e.isLeaf&&`${t}-tree-node-indent--is-leaf`,e.isLastChild&&`${t}-tree-node-indent--last-child`]},b("div",{style:{width:`${p}px`}})):b(Qt,{clsPrefix:t,expanded:this.expanded,selected:i,loading:this.loading,hide:e.isLeaf,tmNode:this.tmNode,indent:p,onClick:this.handleSwitcherClick}),K?null:I,b(Yt,{ref:"contentInstRef",clsPrefix:t,checked:x,selected:i,onClick:this.handleContentClick,nodeProps:w?void 0:C,onDragstart:k&&!w&&!N?this.handleDragStart:void 0,tmNode:e}),k?this.showDropMark?$n({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:p}):this.showDropMarkAsParent?$n({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:p}):null:null,K?I:null))}}),jn=tl;function ll({props:e,fNodesRef:t,mergedExpandedKeysRef:o,mergedSelectedKeysRef:s,mergedCheckedKeysRef:a,handleCheck:i,handleSelect:x,handleSwitcherClick:c}){const{value:k}=s,w=pe(Un,null),p=w?w.pendingNodeKeyRef:_(k.length?k[k.length-1]:null);function L(N){var $;if(!e.keyboard)return{enterBehavior:null};const{value:R}=p;let C=null;if(R===null){if((N.key==="ArrowDown"||N.key==="ArrowUp")&&N.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(N.key)&&R===null){const{value:g}=t;let v=0;for(;v<g.length;){if(!g[v].disabled){p.value=g[v].key;break}v+=1}}}else{const{value:g}=t;let v=g.findIndex(S=>S.key===R);if(!~v)return{enterBehavior:null};if(N.key==="Enter"){const S=g[v];switch(C=(($=e.overrideDefaultNodeClickBehavior)===null||$===void 0?void 0:$.call(e,{option:S.rawNode}))||null,C){case"toggleCheck":i(S,!a.value.includes(S.key));break;case"toggleSelect":x(S);break;case"toggleExpand":c(S);break;case"none":break;case"default":default:C="default",x(S)}}else if(N.key==="ArrowDown")for(N.preventDefault(),v+=1;v<g.length;){if(!g[v].disabled){p.value=g[v].key;break}v+=1}else if(N.key==="ArrowUp")for(N.preventDefault(),v-=1;v>=0;){if(!g[v].disabled){p.value=g[v].key;break}v-=1}else if(N.key==="ArrowLeft"){const S=g[v];if(S.isLeaf||!o.value.includes(R)){const K=S.getParent();K&&(p.value=K.key)}else c(S)}else if(N.key==="ArrowRight"){const S=g[v];if(S.isLeaf)return{enterBehavior:null};if(!o.value.includes(R))c(S);else for(v+=1;v<g.length;){if(!g[v].disabled){p.value=g[v].key;break}v+=1}}}return{enterBehavior:C}}return{pendingNodeKeyRef:p,handleKeydown:L}}const ol=de({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return b(Tt,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>b("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:Fn(this.height)}},this.nodes.map(t=>b(jn,{clsPrefix:e,tmNode:t})))})}}),hn=Lt(),rl=E("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[J("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),J(">",[E("tree-node",[J("&:first-child","margin-top: 0;")])]),E("tree-motion-wrapper",[F("expand",[Rn({duration:"0.2s"})]),F("collapse",[Rn({duration:"0.2s",reverse:!0})])]),E("tree-node-wrapper",`
 box-sizing: border-box;
 padding: var(--n-node-wrapper-padding);
 `),E("tree-node",`
 transform: translate3d(0,0,0);
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[F("highlight",[E("tree-node-content",[te("text","border-bottom-color: var(--n-node-text-color-disabled);")])]),F("disabled",[E("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),De("disabled",[F("clickable",[E("tree-node-content",`
 cursor: pointer;
 `)])])]),F("block-node",[E("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),De("block-line",[E("tree-node",[De("disabled",[E("tree-node-content",[J("&:hover","background: var(--n-node-color-hover);")]),F("selectable",[E("tree-node-content",[J("&:active","background: var(--n-node-color-pressed);")])]),F("pending",[E("tree-node-content",`
 background: var(--n-node-color-hover);
 `)]),F("selected",[E("tree-node-content","background: var(--n-node-color-active);")])]),F("selected",[E("tree-node-content","background: var(--n-node-color-active);")])])]),F("block-line",[E("tree-node",[De("disabled",[J("&:hover","background: var(--n-node-color-hover);"),F("pending",`
 background: var(--n-node-color-hover);
 `),F("selectable",[De("selected",[J("&:active","background: var(--n-node-color-pressed);")])]),F("selected","background: var(--n-node-color-active);")]),F("selected","background: var(--n-node-color-active);"),F("disabled",`
 cursor: not-allowed;
 `)])]),E("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 `,[F("show-line","position: relative",[J("&::before",`
 position: absolute;
 left: 50%;
 border-left: 1px solid var(--n-line-color);
 transition: border-color .3s var(--n-bezier);
 transform: translate(-50%);
 content: "";
 top: var(--n-line-offset-top);
 bottom: var(--n-line-offset-bottom);
 `),F("last-child",[J("&::before",`
 bottom: 50%;
 `)]),F("is-leaf",[J("&::after",`
 position: absolute;
 content: "";
 left: calc(50% + 0.5px);
 right: 0;
 bottom: 50%;
 transition: border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-line-color);
 `)])]),De("show-line","height: 0;")]),E("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: var(--n-node-content-height);
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[te("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[E("icon",[hn]),E("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[hn]),E("base-icon",[hn])]),F("hide","visibility: hidden;"),F("expanded","transform: rotate(90deg);")]),E("tree-node-checkbox",`
 display: inline-flex;
 height: var(--n-node-content-height);
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 `),E("tree-node-content",`
 user-select: none;
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: var(--n-node-content-height);
 box-sizing: border-box;
 line-height: var(--n-line-height);
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[J("&:last-child","margin-bottom: 0;"),te("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),te("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),te("suffix",`
 display: inline-flex;
 `)]),te("empty","margin: auto;")]);var al=globalThis&&globalThis.__awaiter||function(e,t,o,s){function a(i){return i instanceof o?i:new o(function(x){x(i)})}return new(o||(o=Promise))(function(i,x){function c(p){try{w(s.next(p))}catch(L){x(L)}}function k(p){try{w(s.throw(p))}catch(L){x(L)}}function w(p){p.done?i(p.value):a(p.value).then(c,k)}w((s=s.apply(e,t||[])).next())})};function Bn(e,t,o,s){return{getIsGroup(){return!1},getKey(i){return i[e]},getChildren:s||(i=>i[t]),getDisabled(i){return!!(i[o]||i.checkboxDisabled)}}}const il={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array],overrideDefaultNodeClickBehavior:Function},dl=Object.assign(Object.assign(Object.assign(Object.assign({},Le.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,showLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},scrollbarProps:Object,indent:{type:Number,default:24},allowDrop:{type:Function,default:Zt},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),il),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),sl=de({name:"Tree",props:dl,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:o,mergedRtlRef:s}=gn(e),a=vn("Tree",s,t),i=Le("Tree","-tree",rl,Et,e,t),x=_(null),c=_(null),k=_(null);function w(){var n;return(n=k.value)===null||n===void 0?void 0:n.listElRef}function p(){var n;return(n=k.value)===null||n===void 0?void 0:n.itemsElRef}const L=M(()=>{const{filter:n}=e;if(n)return n;const{labelField:l}=e;return(r,f)=>{if(!r.length)return!0;const h=f[l];return typeof h=="string"?h.toLowerCase().includes(r.toLowerCase()):!1}}),N=M(()=>{const{pattern:n}=e;return n?!n.length||!L.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:nl(e.data,L.value,n,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),$=M(()=>Cn(e.showIrrelevantNodes?e.data:N.value.filteredTree,Bn(e.keyField,e.childrenField,e.disabledField,e.getChildren))),R=pe(Un,null),C=e.internalTreeSelect?R.dataTreeMate:M(()=>e.showIrrelevantNodes?$.value:Cn(e.data,Bn(e.keyField,e.childrenField,e.disabledField,e.getChildren))),{watchProps:g}=e,v=_([]);g!=null&&g.includes("defaultCheckedKeys")?Ae(()=>{v.value=e.defaultCheckedKeys}):v.value=e.defaultCheckedKeys;const S=A(e,"checkedKeys"),K=Ve(S,v),I=M(()=>C.value.getCheckedKeys(K.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),W=Jt(e),j=M(()=>I.value.checkedKeys),ue=M(()=>{const{indeterminateKeys:n}=e;return n!==void 0?n:I.value.indeterminateKeys}),ce=_([]);g!=null&&g.includes("defaultSelectedKeys")?Ae(()=>{ce.value=e.defaultSelectedKeys}):ce.value=e.defaultSelectedKeys;const fe=A(e,"selectedKeys"),se=Ve(fe,ce),he=_([]),ge=n=>{he.value=e.defaultExpandAll?C.value.getNonLeafKeys():n===void 0?e.defaultExpandedKeys:n};g!=null&&g.includes("defaultExpandedKeys")?Ae(()=>{ge(void 0)}):Ae(()=>{ge(e.defaultExpandedKeys)});const Ee=A(e,"expandedKeys"),d=Ve(Ee,he),y=M(()=>$.value.getFlattenedNodes(d.value)),{pendingNodeKeyRef:m,handleKeydown:D}=ll({props:e,mergedCheckedKeysRef:K,mergedSelectedKeysRef:se,fNodesRef:y,mergedExpandedKeysRef:d,handleCheck:Je,handleSelect:en,handleSwitcherClick:kn});let T=null,V=null;const Pe=_(new Set),Ge=M(()=>e.internalHighlightKeySet||N.value.highlightKeySet),We=Ve(Ge,Pe),u=_(new Set),P=M(()=>d.value.filter(n=>!u.value.has(n)));let z=0;const H=_(null),X=_(null),Fe=_(null),Ie=_(null),ze=_(0),Vn=M(()=>{const{value:n}=X;return n?n.parent:null});let Qe=!1;_e(A(e,"data"),()=>{Qe=!0,He(()=>{Qe=!1}),u.value.clear(),m.value=null,Be()},{deep:!1});let Xe=!1;const Ye=()=>{Xe=!0,He(()=>{Xe=!1})};let $e;_e(A(e,"pattern"),(n,l)=>{if(e.showIrrelevantNodes)if($e=void 0,n){const{expandedKeys:r,highlightKeySet:f}=el(e.data,e.pattern,e.keyField,e.childrenField,L.value);Pe.value=f,Ye(),we(r,le(r),{node:null,action:"filter"})}else Pe.value=new Set;else if(!n.length)$e!==void 0&&(Ye(),we($e,le($e),{node:null,action:"filter"}));else{l.length||($e=d.value);const{expandedKeys:r}=N.value;r!==void 0&&(Ye(),we(r,le(r),{node:null,action:"filter"}))}});function yn(n){return al(this,void 0,void 0,function*(){const{onLoad:l}=e;if(!l){yield Promise.resolve();return}const{value:r}=u;if(!r.has(n.key)){r.add(n.key);try{(yield l(n.rawNode))===!1&&Ne()}catch(f){console.error(f),Ne()}r.delete(n.key)}})}Ae(()=>{var n;const{value:l}=$;if(!l)return;const{getNode:r}=l;(n=d.value)===null||n===void 0||n.forEach(f=>{const h=r(f);h&&!h.shallowLoaded&&yn(h)})});const xe=_(!1),ve=_([]);_e(P,(n,l)=>{if(!e.animated||Xe){He(Ue);return}if(Qe)return;const r=ke(i.value.self.nodeHeight),f=new Set(l);let h=null,U=null;for(const O of n)if(!f.has(O)){if(h!==null)return;h=O}const ee=new Set(n);for(const O of l)if(!ee.has(O)){if(U!==null)return;U=O}if(h===null&&U===null)return;const{virtualScroll:oe}=e,Ce=(oe?k.value.listElRef:x.value).offsetHeight,Se=Math.ceil(Ce/r)+1;let re;if(h!==null&&(re=l),U!==null&&(re===void 0?re=n:re=re.filter(O=>O!==U)),xe.value=!0,ve.value=$.value.getFlattenedNodes(re),h!==null){const O=ve.value.findIndex(ae=>ae.key===h);if(~O){const ae=ve.value[O].children;if(ae){const ie=Dn(ae,n);ve.value.splice(O+1,0,{__motion:!0,mode:"expand",height:oe?ie.length*r:void 0,nodes:oe?ie.slice(0,Se):ie})}}}if(U!==null){const O=ve.value.findIndex(ae=>ae.key===U);if(~O){const ae=ve.value[O].children;if(!ae)return;xe.value=!0;const ie=Dn(ae,n);ve.value.splice(O+1,0,{__motion:!0,mode:"collapse",height:oe?ie.length*r:void 0,nodes:oe?ie.slice(0,Se):ie})}}});const Hn=M(()=>Pt(y.value)),qn=M(()=>xe.value?ve.value:y.value);function Ue(){const{value:n}=c;n&&n.sync()}function Gn(){xe.value=!1,e.virtualScroll&&He(Ue)}function le(n){const{getNode:l}=C.value;return n.map(r=>{var f;return((f=l(r))===null||f===void 0?void 0:f.rawNode)||null})}function we(n,l,r){const{"onUpdate:expandedKeys":f,onUpdateExpandedKeys:h}=e;he.value=n,f&&ne(f,n,l,r),h&&ne(h,n,l,r)}function mn(n,l,r){const{"onUpdate:checkedKeys":f,onUpdateCheckedKeys:h}=e;v.value=n,h&&ne(h,n,l,r),f&&ne(f,n,l,r)}function Wn(n,l){const{"onUpdate:indeterminateKeys":r,onUpdateIndeterminateKeys:f}=e;r&&ne(r,n,l),f&&ne(f,n,l)}function Ze(n,l,r){const{"onUpdate:selectedKeys":f,onUpdateSelectedKeys:h}=e;ce.value=n,h&&ne(h,n,l,r),f&&ne(f,n,l,r)}function Qn(n){const{onDragenter:l}=e;l&&ne(l,n)}function Xn(n){const{onDragleave:l}=e;l&&ne(l,n)}function Yn(n){const{onDragend:l}=e;l&&ne(l,n)}function Zn(n){const{onDragstart:l}=e;l&&ne(l,n)}function Jn(n){const{onDragover:l}=e;l&&ne(l,n)}function et(n){const{onDrop:l}=e;l&&ne(l,n)}function Be(){nt(),ye()}function nt(){H.value=null}function ye(){ze.value=0,X.value=null,Fe.value=null,Ie.value=null,Ne()}function Ne(){T&&(window.clearTimeout(T),T=null),V=null}function Je(n,l){if(e.disabled||be(n,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple){en(n);return}const r=l?"check":"uncheck",{checkedKeys:f,indeterminateKeys:h}=C.value[r](n.key,j.value,{cascade:e.cascade,checkStrategy:W.value,allowNotLoaded:e.allowCheckingNotLoaded});mn(f,le(f),{node:n.rawNode,action:r}),Wn(h,le(h))}function tt(n){if(e.disabled)return;const{key:l}=n,{value:r}=d,f=r.findIndex(h=>h===l);if(~f){const h=Array.from(r);h.splice(f,1),we(h,le(h),{node:n.rawNode,action:"collapse"})}else{const h=$.value.getNode(l);if(!h||h.isLeaf)return;let U;if(e.accordion){const ee=new Set(n.siblings.map(({key:oe})=>oe));U=r.filter(oe=>!ee.has(oe)),U.push(l)}else U=r.concat(l);we(U,le(U),{node:n.rawNode,action:"expand"})}}function kn(n){e.disabled||xe.value||tt(n)}function en(n){if(!(e.disabled||!e.selectable)){if(m.value=n.key,e.internalUnifySelectCheck){const{value:{checkedKeys:l,indeterminateKeys:r}}=I;e.multiple?Je(n,!(l.includes(n.key)||r.includes(n.key))):mn([n.key],le([n.key]),{node:n.rawNode,action:"check"})}if(e.multiple){const l=Array.from(se.value),r=l.findIndex(f=>f===n.key);~r?e.cancelable&&l.splice(r,1):~r||l.push(n.key),Ze(l,le(l),{node:n.rawNode,action:~r?"unselect":"select"})}else se.value.includes(n.key)?e.cancelable&&Ze([],[],{node:n.rawNode,action:"unselect"}):Ze([n.key],le([n.key]),{node:n.rawNode,action:"select"})}}function lt(n){if(T&&(window.clearTimeout(T),T=null),n.isLeaf)return;V=n.key;const l=()=>{if(V!==n.key)return;const{value:r}=Fe;if(r&&r.key===n.key&&!d.value.includes(n.key)){const f=d.value.concat(n.key);we(f,le(f),{node:n.rawNode,action:"expand"})}T=null,V=null};n.shallowLoaded?T=window.setTimeout(()=>{l()},1e3):T=window.setTimeout(()=>{yn(n).then(()=>{l()})},1e3)}function ot({event:n,node:l}){!e.draggable||e.disabled||be(l,e.disabledField)||(pn({event:n,node:l},!1),Qn({event:n,node:l.rawNode}))}function rt({event:n,node:l}){!e.draggable||e.disabled||be(l,e.disabledField)||Xn({event:n,node:l.rawNode})}function at(n){n.target===n.currentTarget&&ye()}function it({event:n,node:l}){Be(),!(!e.draggable||e.disabled||be(l,e.disabledField))&&Yn({event:n,node:l.rawNode})}function dt({event:n,node:l}){!e.draggable||e.disabled||be(l,e.disabledField)||(z=n.clientX,H.value=l,Zn({event:n,node:l.rawNode}))}function pn({event:n,node:l},r=!0){var f;if(!e.draggable||e.disabled||be(l,e.disabledField))return;const{value:h}=H;if(!h)return;const{allowDrop:U,indent:ee}=e;r&&Jn({event:n,node:l.rawNode});const oe=n.currentTarget,{height:Ce,top:Se}=oe.getBoundingClientRect(),re=n.clientY-Se;let O;U({node:l.rawNode,dropPosition:"inside",phase:"drag"})?re<=8?O="before":re>=Ce-8?O="after":O="inside":re<=Ce/2?O="before":O="after";const{value:ie}=Hn;let B,G;const Ke=ie(l.key);if(Ke===null){ye();return}let Me=!1;O==="inside"?(B=l,G="inside"):O==="before"?l.isFirstChild?(B=l,G="before"):(B=y.value[Ke-1],G="after"):(B=l,G="after"),!B.isLeaf&&d.value.includes(B.key)&&(Me=!0,G==="after"&&(B=y.value[Ke+1],B?G="before":(B=l,G="inside")));const wn=B;if(Fe.value=wn,!Me&&h.isLastChild&&h.key===B.key&&(G="after"),G==="after"){let Nn=z-n.clientX,nn=0;for(;Nn>=ee/2&&B.parent!==null&&B.isLastChild&&nn<1;)Nn-=ee,nn+=1,B=B.parent;ze.value=nn}else ze.value=0;if((h.contains(B)||G==="inside"&&((f=h.parent)===null||f===void 0?void 0:f.key)===B.key)&&!(h.key===wn.key&&h.key===B.key)){ye();return}if(!U({node:B.rawNode,dropPosition:G,phase:"drag"})){ye();return}if(h.key===B.key)Ne();else if(V!==B.key)if(G==="inside"){if(e.expandOnDragenter){if(lt(B),!B.shallowLoaded&&V!==B.key){Be();return}}else if(!B.shallowLoaded){Be();return}}else Ne();else G!=="inside"&&Ne();Ie.value=G,X.value=B}function st({event:n,node:l,dropPosition:r}){if(!e.draggable||e.disabled||be(l,e.disabledField))return;const{value:f}=H,{value:h}=X,{value:U}=Ie;if(!(!f||!h||!U)&&e.allowDrop({node:h.rawNode,dropPosition:U,phase:"drag"})&&f.key!==h.key){if(U==="before"){const ee=f.getNext({includeDisabled:!0});if(ee&&ee.key===h.key){ye();return}}if(U==="after"){const ee=f.getPrev({includeDisabled:!0});if(ee&&ee.key===h.key){ye();return}}et({event:n,node:h.rawNode,dragNode:f.rawNode,dropPosition:r}),Be()}}function ct(){Ue()}function ut(){Ue()}function ft(n){var l;if(e.virtualScroll||e.internalScrollable){const{value:r}=c;if(!((l=r==null?void 0:r.containerRef)===null||l===void 0)&&l.contains(n.relatedTarget))return;m.value=null}else{const{value:r}=x;if(r!=null&&r.contains(n.relatedTarget))return;m.value=null}}_e(m,n=>{var l,r;if(n!==null){if(e.virtualScroll)(l=k.value)===null||l===void 0||l.scrollTo({key:n});else if(e.internalScrollable){const{value:f}=c;if(f===null)return;const h=(r=f.contentRef)===null||r===void 0?void 0:r.querySelector(`[data-key="${In(n)}"]`);if(!h)return;f.scrollTo({el:h})}}}),_n(Oe,{loadingKeysRef:u,highlightKeySetRef:We,displayedCheckedKeysRef:j,displayedIndeterminateKeysRef:ue,mergedSelectedKeysRef:se,mergedExpandedKeysRef:d,mergedThemeRef:i,mergedCheckStrategyRef:W,nodePropsRef:A(e,"nodeProps"),disabledRef:A(e,"disabled"),checkableRef:A(e,"checkable"),selectableRef:A(e,"selectable"),expandOnClickRef:A(e,"expandOnClick"),onLoadRef:A(e,"onLoad"),draggableRef:A(e,"draggable"),blockLineRef:A(e,"blockLine"),indentRef:A(e,"indent"),cascadeRef:A(e,"cascade"),checkOnClickRef:A(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:Fe,droppingNodeParentRef:Vn,draggingNodeRef:H,droppingPositionRef:Ie,droppingOffsetLevelRef:ze,fNodesRef:y,pendingNodeKeyRef:m,showLineRef:A(e,"showLine"),disabledFieldRef:A(e,"disabledField"),internalScrollableRef:A(e,"internalScrollable"),internalCheckboxFocusableRef:A(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:A(e,"renderLabel"),renderPrefixRef:A(e,"renderPrefix"),renderSuffixRef:A(e,"renderSuffix"),renderSwitcherIconRef:A(e,"renderSwitcherIcon"),labelFieldRef:A(e,"labelField"),multipleRef:A(e,"multiple"),overrideDefaultNodeClickBehaviorRef:A(e,"overrideDefaultNodeClickBehavior"),handleSwitcherClick:kn,handleDragEnd:it,handleDragEnter:ot,handleDragLeave:rt,handleDragStart:dt,handleDrop:st,handleDragOver:pn,handleSelect:en,handleCheck:Je});function ht(n,l){var r,f;typeof n=="number"?(r=k.value)===null||r===void 0||r.scrollTo(n,l||0):(f=k.value)===null||f===void 0||f.scrollTo(n)}const gt={handleKeydown:D,scrollTo:ht,getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:n}=I.value;return{keys:n,options:le(n)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:n}=I.value;return{keys:n,options:le(n)}}},xn=M(()=>{const{common:{cubicBezierEaseInOut:n},self:{fontSize:l,nodeBorderRadius:r,nodeColorHover:f,nodeColorPressed:h,nodeColorActive:U,arrowColor:ee,loadingColor:oe,nodeTextColor:Ce,nodeTextColorDisabled:Se,dropMarkColor:re,nodeWrapperPadding:O,nodeHeight:ae,lineHeight:ie,lineColor:B}}=i.value,G=ln(O,"top"),Ke=ln(O,"bottom"),Me=Fn(ke(ae)-ke(G)-ke(Ke));return{"--n-arrow-color":ee,"--n-loading-color":oe,"--n-bezier":n,"--n-font-size":l,"--n-node-border-radius":r,"--n-node-color-active":U,"--n-node-color-hover":f,"--n-node-color-pressed":h,"--n-node-text-color":Ce,"--n-node-text-color-disabled":Se,"--n-drop-mark-color":re,"--n-node-wrapper-padding":O,"--n-line-offset-top":`-${G}`,"--n-line-offset-bottom":`-${Ke}`,"--n-node-content-height":Me,"--n-line-height":ie,"--n-line-color":B}}),Re=o?On("tree",void 0,xn,e):void 0;return Object.assign(Object.assign({},gt),{mergedClsPrefix:t,mergedTheme:i,rtlEnabled:a,fNodes:qn,aip:xe,selfElRef:x,virtualListInstRef:k,scrollbarInstRef:c,handleFocusout:ft,handleDragLeaveTree:at,handleScroll:ct,getScrollContainer:w,getScrollContent:p,handleAfterEnter:Gn,handleResize:ut,cssVars:o?void 0:xn,themeClass:Re==null?void 0:Re.themeClass,onRender:Re==null?void 0:Re.onRender})},render(){var e;const{fNodes:t,internalRenderEmpty:o}=this;if(!t.length&&o)return o();const{mergedClsPrefix:s,blockNode:a,blockLine:i,draggable:x,disabled:c,internalFocusable:k,checkable:w,handleKeydown:p,rtlEnabled:L,handleFocusout:N,scrollbarProps:$}=this,R=k&&!c,C=R?"0":void 0,g=[`${s}-tree`,L&&`${s}-tree--rtl`,w&&`${s}-tree--checkable`,(i||a)&&`${s}-tree--block-node`,i&&`${s}-tree--block-line`],v=K=>"__motion"in K?b(ol,{height:K.height,nodes:K.nodes,clsPrefix:s,mode:K.mode,onAfterEnter:this.handleAfterEnter}):b(jn,{key:K.key,tmNode:K,clsPrefix:s});if(this.virtualScroll){const{mergedTheme:K,internalScrollablePadding:I}=this,W=ln(I||"0");return b(Kn,Object.assign({},$,{ref:"scrollbarInstRef",onDragleave:x?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:g,theme:K.peers.Scrollbar,themeOverrides:K.peerOverrides.Scrollbar,tabindex:C,onKeydown:R?p:void 0,onFocusout:R?N:void 0}),{default:()=>{var j;return(j=this.onRender)===null||j===void 0||j.call(this),t.length?b($t,{ref:"virtualListInstRef",items:this.fNodes,itemSize:ke(K.self.nodeHeight),ignoreItemResize:this.aip,paddingTop:W.top,paddingBottom:W.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:W.left,paddingRight:W.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:ue})=>v(ue)}):Sn(this.$slots.empty,()=>[b(Tn,{class:`${s}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})])}})}const{internalScrollable:S}=this;return g.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),S?b(Kn,Object.assign({},$,{class:g,tabindex:C,onKeydown:R?p:void 0,onFocusout:R?N:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}}),{default:()=>b("div",{onDragleave:x?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(v))}):b("div",{class:g,tabindex:C,ref:"selfElRef",style:this.cssVars,onKeydown:R?p:void 0,onFocusout:R?N:void 0,onDragleave:x?this.handleDragLeaveTree:void 0},t.length?t.map(v):Sn(this.$slots.empty,()=>[b(Tn,{class:`${s}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}}),cl={class:"container mx-auto p-4"},ul=me("h1",{class:"text-2xl font-bold"},"Translation Manager",-1),fl={class:"flex justify-between gap-4 items-center"},hl={class:"flex gap-4"},gl={class:"w-1/2"},vl={class:"w-1/2"},bl={class:"font-bold"},yl={class:"text-gray-600"},qe="en-US",Rl=de({__name:"index",setup(e){const t=Bt.global.messages,o=_(t),s=Object.keys(t),a=_("en-US"),i=_([]),x=_([]),c=_(null),k=_(""),w=_(!1),p=_(!1),L=_([]),N=_({}),$=M(()=>s.map(d=>({label:v(d),value:d}))),R=M(()=>{try{const d=o.value[a.value];return d?g(d):[]}catch(d){return console.error("Error generating tree data:",d),[]}}),C=M(()=>{const d={};return L.value.forEach(y=>{d[y.language]||(d[y.language]=[]),d[y.language].push(y)}),d});function g(d,y=""){return!d||typeof d!="object"?[]:Object.entries(d).map(([m,D])=>{const T=y?`${y}.${m}`:m;return D&&typeof D=="object"?{key:T,label:m,children:g(D,T)}:{key:T,label:m,isLeaf:!0,value:String(D)}})}function v(d){return{"zh-CN":"Chinese (Simplified)","ar-DZ":"Arabic (Algeria)","zh-TW":"Chinese (Traditional)","en-US":"English (US)","ko-KR":"Korean","ru-RU":"Russian"}[d]}function S(d){var y;if(i.value=d,d.length>0){const m=d[0];c.value=K(R.value,m),(y=c.value)!=null&&y.value&&(k.value=c.value.value)}else c.value=null,k.value=""}function K(d,y){for(const m of d){if(m.key===y)return m;if(m.children){const D=K(m.children,y);if(D)return D}}return null}function I(d){x.value=d}function W(d){c.value&&(j(a.value,c.value.key,d),se())}function j(d,y,m){const D=y.split(".");let T=o.value[d];for(let V=0;V<D.length-1;V++)T[D[V]]||(T[D[V]]={}),T=T[D[V]];T[D[D.length-1]]=m}function ue(d,y,m){const D=`${d}-${y}`;N.value[D]=m,j(d,y,m)}function ce(d,y){const m=`${d}-${y}`;return N.value[m]||""}function fe(d){o.value[d]||(o.value[d]={...o.value["en-US"]})}async function se(){w.value=!0;try{await new Promise(d=>setTimeout(d,1e3)),console.log("Saving translations:",o.value)}catch(d){console.error("Error saving translations:",d)}finally{w.value=!1}}function he(d,y=""){let m=[];for(const D in d)if(Object.prototype.hasOwnProperty.call(d,D)){const T=y?`${y}.${D}`:D;typeof d[D]=="object"&&d[D]!==null?m=[...m,...he(d[D],T)]:m.push(T)}return m}function ge(d,y){return y.split(".").reduce((m,D)=>m==null?void 0:m[D],d)}function Ee(){const d=he(o.value[qe]),y=[];Object.keys(o.value).forEach(m=>{m!==qe&&d.forEach(D=>{const T=ge(o.value[qe],D),V=ge(o.value[m],D);(V===void 0||V===""||typeof V=="string"&&V===T)&&y.push({language:m,key:D,referenceValue:T})})}),L.value=y,p.value=!0}return _e(a,d=>{o.value[d]||fe(d)}),s.forEach(fe),(d,y)=>(Te(),on("div",cl,[Z(q(sn),null,{header:Q(()=>[ul]),default:Q(()=>[Z(q(fn),{vertical:""},{default:Q(()=>[me("div",fl,[Z(q(_t),{value:a.value,"onUpdate:value":y[0]||(y[0]=m=>a.value=m),options:$.value,placeholder:"Select Language",class:"w-64"},null,8,["value","options"]),Z(q(dn),{type:"warning",onClick:Ee},{default:Q(()=>[rn(" Check Missing Translations ")]),_:1})]),me("div",hl,[me("div",gl,[Z(q(sl),{data:R.value,"selected-keys":i.value,"expanded-keys":x.value,"onUpdate:selectedKeys":S,"onUpdate:expandedKeys":I,style:{"max-height":"400px","overflow-y":"auto"}},null,8,["data","selected-keys","expanded-keys"])]),me("div",vl,[c.value?(Te(),an(q(sn),{key:0,title:"Edit Translation"},{default:Q(()=>[Z(q(Pn),{value:k.value,"onUpdate:value":[y[1]||(y[1]=m=>k.value=m),W],type:"textarea",rows:3,placeholder:"Enter translation"},null,8,["value"])]),_:1})):At("",!0)])])]),_:1})]),_:1}),Z(q(Ot),{show:p.value,"onUpdate:show":y[3]||(y[3]=m=>p.value=m)},{default:Q(()=>[Z(q(sn),{style:{"max-width":"900px"},title:"Missing Translations",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{footer:Q(()=>[Z(q(fn),{justify:"end"},{default:Q(()=>[Z(q(dn),{onClick:y[2]||(y[2]=m=>p.value=!1)},{default:Q(()=>[rn(" Close ")]),_:1}),Z(q(dn),{type:"primary",onClick:se,loading:w.value},{default:Q(()=>[rn(" Save All Changes ")]),_:1},8,["loading"])]),_:1})]),default:Q(()=>[Z(q(zt),{type:"line"},{default:Q(()=>[(Te(!0),on(Ln,null,En(C.value,(m,D)=>(Te(),an(q(Ut),{key:D,name:D,tab:v(D)},{default:Q(()=>[Z(q(Gt),null,{default:Q(()=>[(Te(!0),on(Ln,null,En(m,T=>(Te(),an(q(Wt),{key:T.key},{default:Q(()=>[Z(q(fn),{vertical:""},{default:Q(()=>[me("div",bl,cn(T.key),1),me("div",yl," Reference ("+cn(qe)+"): "+cn(T.referenceValue),1),Z(q(Pn),{value:ce(T.language,T.key),type:"textarea",rows:2,placeholder:"Enter translation","onUpdate:value":V=>ue(T.language,T.key,V)},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["name","tab"]))),128))]),_:1})]),_:1})]),_:1},8,["show"])]))}});export{Rl as default};
